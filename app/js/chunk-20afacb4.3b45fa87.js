(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-20afacb4"],{"28a5":function(t,e,o){"use strict";var a=o("aae3"),i=o("cb7c"),n=o("ebd6"),s=o("0390"),c=o("9def"),r=o("5f1b"),l=o("520a"),u=o("79e5"),p=Math.min,f=[].push,h="split",d="length",m="lastIndex",v=4294967295,b=!u((function(){RegExp(v,"y")}));o("214f")("split",2,(function(t,e,o,u){var g;return g="c"=="abbc"[h](/(b)*/)[1]||4!="test"[h](/(?:)/,-1)[d]||2!="ab"[h](/(?:ab)*/)[d]||4!="."[h](/(.?)(.?)/)[d]||"."[h](/()()/)[d]>1||""[h](/.?/)[d]?function(t,e){var i=String(this);if(void 0===t&&0===e)return[];if(!a(t))return o.call(i,t,e);var n,s,c,r=[],u=(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.unicode?"u":"")+(t.sticky?"y":""),p=0,h=void 0===e?v:e>>>0,b=new RegExp(t.source,u+"g");while(n=l.call(b,i)){if(s=b[m],s>p&&(r.push(i.slice(p,n.index)),n[d]>1&&n.index<i[d]&&f.apply(r,n.slice(1)),c=n[0][d],p=s,r[d]>=h))break;b[m]===n.index&&b[m]++}return p===i[d]?!c&&b.test("")||r.push(""):r.push(i.slice(p)),r[d]>h?r.slice(0,h):r}:"0"[h](void 0,0)[d]?function(t,e){return void 0===t&&0===e?[]:o.call(this,t,e)}:o,[function(o,a){var i=t(this),n=void 0==o?void 0:o[e];return void 0!==n?n.call(o,i,a):g.call(String(i),o,a)},function(t,e){var a=u(g,t,this,e,g!==o);if(a.done)return a.value;var l=i(t),f=String(this),h=n(l,RegExp),d=l.unicode,m=(l.ignoreCase?"i":"")+(l.multiline?"m":"")+(l.unicode?"u":"")+(b?"y":"g"),w=new h(b?l:"^(?:"+l.source+")",m),S=void 0===e?v:e>>>0;if(0===S)return[];if(0===f.length)return null===r(w,f)?[f]:[];var x=0,C=0,k=[];while(C<f.length){w.lastIndex=b?C:0;var A,y=r(w,b?f:f.slice(C));if(null===y||(A=p(c(w.lastIndex+(b?0:C)),f.length))===x)C=s(f,C,d);else{if(k.push(f.slice(x,C)),k.length===S)return k;for(var U=1;U<=y.length-1;U++)if(k.push(y[U]),k.length===S)return k;C=x=A}}return k.push(f.slice(x)),k}]}))},"33aa":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"suwis-setting"},[a("van-cell",{attrs:{title:"会员头像",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyProfile}},[[a("img",{staticClass:"profile",attrs:{src:t.user.photo||o("c8c1"),alt:"头像"}}),a("van-icon",{staticStyle:{"margin-left":"28px"},attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),a("van-cell",{attrs:{title:"用户昵称",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyNickname}},[[t._v("\n            "+t._s(t.user.name)+"\n            "),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),0===t.user_type||2===t.user_type?a("van-cell",{attrs:{title:"我的二维码名片",clickable:!0,center:!0,"value-class":"content"},on:{click:t.barCodeScan}},[[a("img",{staticClass:"qr-code",attrs:{src:o("4df5"),alt:"二维码"}}),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2):t._e(),a("van-cell",{attrs:{title:"我的位置",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyLocation}},[[t._v("\n            "+t._s(t._f("address")(t.user))+"\n            "),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),a("van-cell",{attrs:{title:"我的收货地址",center:!0,"value-class":"content",to:"/uc/setting/address"}},[a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})],1),a("van-cell",{attrs:{title:"登录密码",center:!0,"value-class":"content",to:"/resetpwd"}},[[t._v("\n            修改\n            "),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),a("van-cell",{attrs:{title:"支付密码",center:!0,"value-class":"content",to:"/resetpaypwd"}},[[t._v("\n            修改\n            "),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),a("div",{staticClass:"login-out",on:{click:t.logout}},[t._v("退出当前账户")]),a("van-popup",{staticClass:"popup-custom popup-profile",attrs:{"close-on-click-overlay":!1},model:{value:t.profileShow,callback:function(e){t.profileShow=e},expression:"profileShow"}},[a("div",{staticClass:"popup-content"},[a("img",{staticClass:"popup-profile",attrs:{src:t.profileUrl,alt:""}}),a("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/gif, image/jpeg","max-size":t.maxSize},on:{oversize:t.oversize}},[a("div",{staticClass:"upload-text"},[t._v("更换头像")])])],1),a("div",{staticClass:"button-line"},[a("button",{staticClass:"cancel",on:{click:t.closePopup}},[t._v("取消")]),a("button",{staticClass:"confirm",on:{click:function(e){return t.confirmPopup("profile")}}},[t._v("确定")])])]),a("van-popup",{staticClass:"popup-custom popup-name",attrs:{"close-on-click-overlay":!1},model:{value:t.nameShow,callback:function(e){t.nameShow=e},expression:"nameShow"}},[a("div",{staticClass:"popup-content"},[a("van-field",{attrs:{placeholder:"请输入昵称"},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1),a("div",{staticClass:"button-line"},[a("button",{staticClass:"cancel",on:{click:t.closePopup}},[t._v("取消")]),a("button",{staticClass:"confirm",on:{click:function(e){return t.confirmPopup("name")}}},[t._v("确定")])])]),a("BarCode",{attrs:{show:t.qrCodeShow},on:{close:t.closeBarCode,success:t.scanSuccess}}),a("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.locationShow,callback:function(e){t.locationShow=e},expression:"locationShow"}},[a("van-area",{attrs:{"area-list":t.areaList,value:t.locationValue},on:{confirm:t.confirmLocation,cancel:t.closePopup}})],1),a("van-dialog",{attrs:{"show-cancel-button":"",title:"成为VIP",beforeClose:t.beforeClose},on:{confirm:t.successSubmit},model:{value:t.isShow,callback:function(e){t.isShow=e},expression:"isShow"}},[a("van-field",{staticClass:"ldfield",attrs:{placeholder:"请输入您的楼栋号"},model:{value:t.buildingNum,callback:function(e){t.buildingNum=e},expression:"buildingNum"}})],1)],1)},i=[],n=(o("28a5"),o("ac6a"),o("456d"),o("7514"),o("a481"),o("7f7f"),o("0edf")),s=o("c8c1"),c=o.n(s),r=o("f0b6"),l=o("9485"),u={name:"setting",components:{BarCode:r["a"]},filters:{address:function(t){return t.area?t.province+t.city+t.area:"---"}},data:function(){return{isShow:!1,buildingNum:"",codeUrl:"",areaList:n["a"],name:"",maxSize:5242880,profileUrl:"",locationValue:"",profileShow:!1,nameShow:!1,locationShow:!1,qrCodeShow:!1,user:{},user_type:0}},methods:{barCodeScan:function(){var t=this.user_type;0===t?this.qrCodeShow=!0:2===t&&this.$router.push({path:"/uc/setting/card"})},closeBarCode:function(){this.qrCodeShow=!1},closePopup:function(){this.profileUrl="",this.name="",this.province="",this.city="",this.area="",this.locationValue="",this.profileShow=!1,this.nameShow=!1,this.locationShow=!1},confirmPopup:function(t){var e=this,o=null;switch(t){case"profile":o={photo:this.profileUrl};break;case"name":o={name:this.name};break;case"location":o={province:this.province,city:this.city,area:this.area};break}this.$axios.post("/user/usersave",o).then((function(t){var o=t.data;1===o.code?(o&&Object.assign(e,o.data),e.closePopup(),e.getUserInfo(),e.$toast("修改成功")):e.$toast(o.msg)}))},confirmLocation:function(t){t&&(this.province=t[0].name,this.city=t[1].name,this.area=t[2].name),this.confirmPopup("location")},getUserInfo:function(){var t=this;this.$axios.post("/mine/index").then((function(e){var o=e.data;1===o.code?o&&Object.assign(t,o.data):t.$toast(o.msg)}))},logout:function(){var t=this;this.$axios.post("/login/outlogin").then((function(e){var o=e.data;1===o.code?(t.$toast("退出成功"),t.$store.commit("core/exit"),t.$router.replace({path:"/login"})):t.$toast(o.msg)}))},modifyLocation:function(){var t=this.user;if(t.area){var e=n["a"].county_list;this.locationValue=Object.keys(e).find((function(o){return e[o]===t.area}))}this.locationShow=!0},modifyNickname:function(){this.name=this.user.name,this.nameShow=!0},modifyProfile:function(){this.profileUrl=this.user.photo||c.a,this.profileShow=!0},onRead:function(t){var e=this,o=new FormData;o.append("file",t.file),this.$axios.post("/index/upload",o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){var o=t.data;1===o.code?o.data&&(e.profileUrl=o.data):e.$toast(o.msg)}))},oversize:function(){var t=Math.floor(this.maxSize/1024/1024);this.$toast("上传图片最大不能超过".concat(t,"MB"))},scanSuccess:function(t){this.qrCodeShow=!1,t&&-1!==t.indexOf("index/user/addmember")?(this.codeUrl=t,this.isShow=!0):this.$toast("请扫描正确团长二维码！")},beforeClose:function(t,e){"cancel"===t&&e(),"confirm"!==t||this.buildingNum?e():(this.$toast("请输入楼栋号"),e(!1))},successSubmit:function(){var t=this;if(this.buildingNum){var e=app.$vm.$store.getters["core/token"];-1==this.codeUrl.indexOf("://")&&(this.codeUrl="".concat(l["a"].apihost.split("//")[0],"//").concat(this.codeUrl));var o="".concat(this.codeUrl,"/token/").concat(e,"/region_detail/").concat(this.buildingNum);this.$axios.post(o,{region_id:o}).then((function(e){var o=e.data;1===o.code?(t.isShow=!1,t.getUserInfo(),t.$toast("绑定成功")):(t.isShow=!1,t.$toast(o.msg))}))}}},created:function(){this.getUserInfo()},beforeRouteLeave:function(t,e,o){this.qrCodeShow=!1,o()}},p=u,f=(o("45fd"),o("2877")),h=Object(f["a"])(p,a,i,!1,null,"26eda286",null);e["default"]=h.exports},"45fd":function(t,e,o){"use strict";var a=o("f015c"),i=o.n(a);i.a},"4df5":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAG1BMVEWZmZlHcEyampqYmJiXl5eQkJCZmZmYmJiZmZnmt8deAAAACHRSTlOBAL9AJwpfwA0sv3YAAACWSURBVBjTXdAxDsIwDAXQb1gyxmoRzBlQ1qonqJSBla0jGzNbRzORY2MnpbT18vUky3aCbEW+BD4AHHnRiBBmvpB/azjIqR8MbX9XNPllOOdujzaQwYfB7QassVlaqmtq8qq2qG0z6gA+hCuekJTSjTgGCXXPSBy4QM/5Qw9VxCxY8MBxftxo0wjLgIr6IdoGTL+lk8UXG0U240Yb79wAAAAASUVORK5CYII="},f015c:function(t,e,o){}}]);
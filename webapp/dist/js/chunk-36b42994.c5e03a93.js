(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36b42994"],{"00a1":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"suwis-simple-good"},[a("ul",{staticClass:"list"},[a("li",{staticClass:"item",on:{click:t.toggleCheck}},[a("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.storeLogo,expression:"storeLogo"}],staticClass:"image",attrs:{src:t.storeLogo,alt:"商品"}}),a("div",{staticClass:"info",style:t.infoStyle},[a("div",{staticClass:"name"},[t._v(t._s(t.name))]),t.desc&&t.desc.length?[a("div",{staticClass:"desc"},t._l(t.desc,function(e){return a("span",{key:e,staticClass:"desc-item"},[t._v(t._s(e))])}),0)]:t._e()],2),t.hasCheckbox?a("div",{staticClass:"checkbox"},[a("van-checkbox",{attrs:{"checked-color":"#e83f44"},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}})],1):t._e()])])])},n=[],i={props:{name:name,desc:{type:Array,default:function(t){return[""]}},storeLogo:{type:String},hasCheckbox:{type:Boolean,default:!1}},data:function(){return{checked:!0,infoStyle:this.hasCheckbox?{width:"calc(100% - 88px)"}:{width:"calc(100% - 48px)"}}},methods:{toggleCheck:function(){this.hasCheckbox&&(this.checked=!this.checked)}}},o=i,r=(a("07e4"),a("2877")),c=Object(r["a"])(o,s,n,!1,null,"1b410c96",null);e["a"]=c.exports},"07e4":function(t,e,a){"use strict";var s=a("277c"),n=a.n(s);n.a},"0a49":function(t,e,a){var s=a("9b43"),n=a("626a"),i=a("4bf8"),o=a("9def"),r=a("cd1c");t.exports=function(t,e){var a=1==t,c=2==t,l=3==t,d=4==t,u=6==t,h=5==t||u,v=e||r;return function(e,r,f){for(var m,p,g=i(e),k=n(g),_=s(r,f,3),C=o(k.length),x=0,b=a?v(e,C):c?v(e,0):void 0;C>x;x++)if((h||x in k)&&(m=k[x],p=_(m,x,g),t))if(a)b[x]=p;else if(p)switch(t){case 3:return!0;case 5:return m;case 6:return x;case 2:b.push(m)}else if(d)return!1;return u?-1:l||d?d:b}}},"277c":function(t,e,a){},"43e5":function(t,e,a){"use strict";var s=a("bcb4"),n=a.n(s);n.a},"70cc":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"suwis-apply-refund"},[a("main",{staticClass:"content"},[a("SimpleGood",{attrs:{name:t.goodInfo.goods_name,desc:[t.goodInfo.header_one,t.goodInfo.header_two,t.goodInfo.header_three],"store-logo":t.goodInfo.goods_img}}),a("ul",{staticClass:"list"},[t.goodInfo.num>1?a("li",{staticClass:"item"},[a("div",{staticClass:"name"},[t._v("退货数量")]),a("div",{staticClass:"value"},[a("van-stepper",{attrs:{max:t.goodInfo.num},model:{value:t.refundNum,callback:function(e){t.refundNum=e},expression:"refundNum"}})],1)]):t._e(),a("li",{staticClass:"item",on:{click:t.showReason}},[a("div",{staticClass:"name"},[t._v(t._s("exchange"===t.type?"换货":"退款")+"原因：")]),a("div",{staticClass:"value"},[t._v("\n                    "+t._s(t._f("reason")(t.reason))+"\n                    "),a("van-icon",{attrs:{name:"arrow",size:"10px",color:"rgb(180, 180, 180)"}})],1)]),"refund"===t.type||"return"===t.type?a("li",{staticClass:"item"},[a("div",{staticClass:"name"},[t._v("退款金额")]),a("div",{staticClass:"value"},[a("span",{staticClass:"color-red price"},[t._v("￥"+t._s(t.goodInfo.sum))])])]):t._e(),"exchange"===t.type?a("li",{staticClass:"item address",on:{click:t.selectAddress}},[a("div",{staticClass:"name"},[t._v("换货地址")]),a("div",{staticClass:"address-box"},[a("div",{staticClass:"address-top"},[a("span",{staticClass:"address-name"},[t._v(t._s(t.address.name))]),a("span",{staticClass:"address-tel"},[t._v(t._s(t.address.tel))])]),a("div",{staticClass:"address"},[t._v(t._s(t._f("location")(t.address)))])]),a("div",{staticClass:"value"},[a("van-icon",{attrs:{name:"arrow",size:"10px",color:"rgb(180, 180, 180)"}})],1)]):t._e(),a("li",{staticClass:"item remark"},[a("div",{staticClass:"name"},[t._v(t._s("exchange"===t.type?"换货":"退款")+"说明：")]),a("van-field",{attrs:{placeholder:"exchange"===t.type?"请输入换货说明（选填）":"请输入退款说明（选填）"},model:{value:t.remark,callback:function(e){t.remark=e},expression:"remark"}})],1)]),a("div",{staticClass:"card"},[t._m(0),a("div",{staticClass:"upload-line"},[t._l(t.imgList,function(e,s){return a("img",{key:e,staticClass:"image-item",attrs:{src:e},on:{click:function(e){return t.removeImg(s)}}})}),a("van-uploader",{directives:[{name:"show",rawName:"v-show",value:t.imgList.length<3,expression:"imgList.length < 3"}],attrs:{"after-read":t.onRead,accept:"image/gif, image/jpeg","max-size":t.maxSize},on:{oversize:t.oversize}},[a("div",{staticClass:"icon-line"},[a("van-icon",{attrs:{name:"photograph",size:"24px",color:"rgb(180, 180, 180)"}})],1),a("div",{staticClass:"upload-text"},[t._v("添加图片")])])],2)]),a("div",{staticClass:"button-line"},[a("div",{staticClass:"deploy",on:{click:t.submit}},[t._v("提交")])])],1),a("van-actionsheet",{attrs:{title:"货物状态"},model:{value:t.statusShow,callback:function(e){t.statusShow=e},expression:"statusShow"}},[a("van-radio-group",{model:{value:t.status,callback:function(e){t.status=e},expression:"status"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"已收到货",clickable:""},nativeOn:{click:function(e){return t.changeStatus("1")}}},[a("van-radio",{attrs:{name:"1"},nativeOn:{click:function(e){return t.changeStatus("1")}}})],1),a("van-cell",{attrs:{title:"未收到货",clickable:""},nativeOn:{click:function(e){return t.changeStatus("2")}}},[a("van-radio",{attrs:{name:"2"},nativeOn:{click:function(e){return t.changeStatus("2")}}})],1)],1)],1)],1),a("van-actionsheet",{attrs:{title:"退款原因"},model:{value:t.reasonShow,callback:function(e){t.reasonShow=e},expression:"reasonShow"}},[a("van-radio-group",{model:{value:t.reason,callback:function(e){t.reason=e},expression:"reason"}},[a("van-cell-group",[a("van-cell",{attrs:{title:"7天无理由退款",clickable:""},nativeOn:{click:function(e){return t.changeReason("1")}}},[a("van-radio",{attrs:{name:"1"},nativeOn:{click:function(e){return t.changeReason("1")}}})],1),a("van-cell",{attrs:{title:"地址、商品信息填写错误",clickable:""},nativeOn:{click:function(e){return t.changeReason("2")}}},[a("van-radio",{attrs:{name:"2"},nativeOn:{click:function(e){return t.changeReason("2")}}})],1),a("van-cell",{attrs:{title:"商家缺货",clickable:""},nativeOn:{click:function(e){return t.changeReason("3")}}},[a("van-radio",{attrs:{name:"3"},nativeOn:{click:function(e){return t.changeReason("3")}}})],1),a("van-cell",{attrs:{title:"其他",clickable:""},nativeOn:{click:function(e){return t.changeReason("4")}}},[a("van-radio",{attrs:{name:"4"},nativeOn:{click:function(e){return t.changeReason("4")}}})],1)],1)],1)],1)],1)},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"title"},[t._v("\n                上传凭证\n                "),a("span",{staticClass:"subtitle"},[t._v("（最多3张）")])])}],i=(a("7514"),a("00a1")),o={refund:"退款",return:"退货退款",exchange:"换货"},r={1:"7天无理由退款",2:"地址、商品信息填写错误",3:"商家缺货",4:"其他"},c={components:{SimpleGood:i["a"]},filters:{goodsStatus:function(t){var e={1:"已收到货",2:"未收到货"};return t?e[t]:"请选择"},location:function(t){var e=t.province||"",a=t.city||"",s=t.area||"",n=t.address||"";return e+a+s+n||"---"},reason:function(t){return t?r[t]:"请选择"}},data:function(){return{address:{},address_id:"",goodInfo:{},refundNum:1,id:"",maxSize:5242880,imgList:[],remark:"",reason:"",status:"",type:"",reasonShow:!1,statusShow:!1}},methods:{changeReason:function(t){this.reason=t,this.reasonShow=!1},changeStatus:function(t){this.status=t,this.statusShow=!1},selectAddress:function(){var t=this.id,e=this.type;this.$router.push({path:"/uc/setting/address",query:{from:this.$route.path,id:t,type:e}})},showReason:function(){this.reasonShow=!0},showStatus:function(){this.statusShow=!0},onRead:function(t){var e=this;if(this.imgList>=5)this.$toast("最多只能上传5张图片");else{var a=new FormData;a.append("file",t.file),this.$axios.post("/index/upload",a,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var a=t.data;1===a.code?a.data&&e.imgList.push(a.data):e.$toast(a.msg)})}},oversize:function(){var t=Math.floor(this.maxSize/1024/1024);this.$toast("上传图片最大不能超过".concat(t,"MB"))},removeImg:function(t){var e=this;this.$dialog.confirm({title:"移除图片",message:"确定移除该图片吗"}).then(function(){e.imgList.splice(t,1)})},submit:function(){var t=this;this.imgList.length?this.reason?this.$axios.post("/order/aftersale",{order_id:this.id,type:o[this.type],reason:r[this.reason],remark:this.remark,num:this.refundNum,address_id:"exchange"===this.type?this.address.id:void 0,imgs:this.imgList}).then(function(e){var a=e.data;1===a.code?(t.$router.push("/uc/orders"),t.$toast("已提交售后申请")):t.$toast(a.msg)}):this.$toast("请选择原因"):this.$toast("请至少上传一张图片凭证")}},created:function(){var t=this;this.id=this.$route.query.id,this.type=this.$route.query.type,this.address_id=this.$route.query.address_id,this.$axios.post("/order/detail",{id:this.id}).then(function(e){var a=e.data;1===a.code?a.data&&(t.goodInfo=a.data):t.$toast(a.msg)}),this.$axios.post("/user/alladdress").then(function(e){var a=e.data;1===a.code?a.data&&(t.address=a.data.find(function(e){return t.address_id?e.id===+t.address_id:1===e.sta})):t.$toast(a.msg)})}},l=c,d=(a("43e5"),a("2877")),u=Object(d["a"])(l,s,n,!1,null,"52446b8c",null);e["default"]=u.exports},7514:function(t,e,a){"use strict";var s=a("5ca1"),n=a("0a49")(5),i="find",o=!0;i in[]&&Array(1)[i](function(){o=!1}),s(s.P+s.F*o,"Array",{find:function(t){return n(this,t,arguments.length>1?arguments[1]:void 0)}}),a("9c6c")(i)},bcb4:function(t,e,a){},cd1c:function(t,e,a){var s=a("e853");t.exports=function(t,e){return new(s(t))(e)}},e853:function(t,e,a){var s=a("d3f4"),n=a("1169"),i=a("2b4c")("species");t.exports=function(t){var e;return n(t)&&(e=t.constructor,"function"!=typeof e||e!==Array&&!n(e.prototype)||(e=void 0),s(e)&&(e=e[i],null===e&&(e=void 0))),void 0===e?Array:e}}}]);
//# sourceMappingURL=chunk-36b42994.c5e03a93.js.map
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c15875a8"],{"41a7":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.isLoading,callback:function(t){e.isLoading=t},expression:"isLoading"}},[i("div",{attrs:{id:"d-content-scroll"}},[i("div",{staticStyle:{"padding-bottom":"50px"}},e._l(e.messageList,function(t){return i("div",[null!==t.pid?i("div",{staticStyle:{"margin-top":"14px"}},[i("div",{staticStyle:{display:"flex","font-size":"12px",color:"#333"}},[i("div",{staticStyle:{flex:"1","max-width":"55px","max-height":"30px"}},[i("img",{staticStyle:{"max-width":"30px","border-radius":"50%",overflow:"hidden",margin:"0 10px 0 15px"},attrs:{src:s("9638")}})]),i("div",{staticStyle:{flex:"1","padding-right":"45px"}},[i("div",{staticStyle:{background:"#fff",display:"inline-block",padding:"3px 11px 3px 9px","border-radius":"4px"}},[i("span",{staticStyle:{"line-height":"24px"}},[e._v("\n                                 "+e._s(t.content)+"\n                             ")])])])])]):e._e(),null==t.pid?i("div",{staticStyle:{"margin-top":"14px",float:"right"}},[i("div",{staticStyle:{display:"flex","font-size":"12px",color:"#333"}},[i("div",{staticStyle:{flex:"1","padding-left":"45px"}},[i("div",{staticStyle:{background:"#fff",display:"inline-block",padding:"3px 11px 3px 9px","border-radius":"4px"}},[i("span",{staticStyle:{"line-height":"24px",float:"right"}},[e._v("\n                                 "+e._s(t.content)+"\n                             ")])])]),i("div",{staticStyle:{flex:"1","max-width":"55px","max-height":"30px"}},[i("img",{staticStyle:{"max-width":"30px","border-radius":"50%",overflow:"hidden",margin:"0 10px 0 15px"},attrs:{src:s("9638")}})])])]):e._e(),i("div",{staticStyle:{clear:"both"}})])}),0)])]),i("div",{staticStyle:{position:"fixed",bottom:"0",width:"100%"}},[i("div",{staticStyle:{display:"flex",padding:"6px 15px 4px 0",background:"#fff"}},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.sendMessage,expression:"sendMessage"}],staticStyle:{flex:"1",margin:"0 15px",background:"#efefef",border:"none",height:"30px",padding:"0 10px","font-size":"14px",color:"#333","border-radius":"4px"},attrs:{type:"text"},domProps:{value:e.sendMessage},on:{input:function(t){t.target.composing||(e.sendMessage=t.target.value)}}}),i("div",{staticStyle:{flex:"1","max-width":"45px","line-height":"30px","font-size":"14px",color:"#333",background:"#EFEFEF","border-radius":"4px"},on:{click:e.getList}},[i("div",{staticStyle:{height:"30px","text-align":"center"}},[e._v("发送")])])])])],1)},a=[],n=(s("c5f6"),s("2b0e")),o=s("b970");n["default"].use(o["h"]);var d={data:function(){return{list:[],sendMessage:"",setInter:null,messageList:[],count:0,isLoading:!1}},methods:{onRefresh:function(){var e=this;this.$axios.post("message/getsm",{store_id:this.$route.query.store_id,id:68}).then(function(t){e.isLoading=!1,console.log(t.data.data.msg)})},getList:function(){var e=this,t=(new Date).getTime();this.$axios.post("message/sendsm",{store_id:this.$route.query.store_id,uuid:t,content:this.sendMessage}).then(function(s){Object(o["h"])(s.data.msg);document.getElementById("d-content-scroll");var i={content:e.sendMessage,uuid:t,pid:null};e.messageList.push(i),sessionStorage.setItem("message",JSON.stringify(e.messageList)),e.sendMessage=""})},getMessage:function(){var e=this;sessionStorage.getItem("message")?(this.messageList=JSON.parse(sessionStorage.getItem("message")),this.$axios.post("message/getsm",{store_id:this.$route.query.store_id}).then(function(e){var t=JSON.parse(sessionStorage.getItem("message")),s=t.map(function(e){return e.uuid}),i=e.data.data.msg.map(function(e){return e.uuid}),a=[];for(var n in i){var o=i[n];if(s.indexOf(o)>-1);else if(s.indexOf(Number(o))){var d=e.data.data.msg[i.indexOf(i[n])];t[s.indexOf(Number(o))]=d}}sessionStorage.setItem("message",JSON.stringify(t.concat(a)))})):this.$axios.post("message/getsm",{store_id:this.$route.query.store_id}).then(function(t){e.messageList=t.data.data.msg.reverse(),sessionStorage.setItem("message",JSON.stringify(t.data.data.msg))})}},mounted:function(){var e=this;document.querySelector("body").setAttribute("style","background-color:#f5f5f5"),this.setInter=setInterval(function(){e.getMessage()},2e3)},destroyed:function(){clearInterval(this.setInter),sessionStorage.removeItem("message")}},r=d,g=(s("ad26"),s("2877")),l=Object(g["a"])(r,i,a,!1,null,"ec4d6538",null);t["default"]=l.exports},9638:function(e,t,s){e.exports=s.p+"img/test1.e08ee749.png"},ad26:function(e,t,s){"use strict";var i=s("c902"),a=s.n(i);a.a},c902:function(e,t,s){}}]);
//# sourceMappingURL=chunk-c15875a8.963d4e3b.js.map
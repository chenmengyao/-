(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3bc06959"],{"33aa":function(t,a,o){"use strict";o.r(a);var e=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"suwis-setting"},[e("van-cell",{attrs:{title:"会员头像",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyProfile}},[[e("img",{staticClass:"profile",attrs:{src:t.user.photo||o("c8c1"),alt:"头像"}}),e("van-icon",{staticStyle:{"margin-left":"28px"},attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("van-cell",{attrs:{title:"用户昵称",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyNickname}},[[t._v("\n            "+t._s(t.user.name)+"\n            "),e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("van-cell",{attrs:{title:"我的二维码名片",clickable:!0,center:!0,"value-class":"content"},on:{click:function(a){t.qrCodeShow=!0}}},[[e("img",{staticClass:"qr-code",attrs:{src:o("4df5"),alt:"二维码"}}),e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("van-cell",{attrs:{title:"我的位置",clickable:!0,center:!0,"value-class":"content"},on:{click:t.modifyLocation}},[[t._v("\n            "+t._s(t._f("address")(t.user))+"\n            "),e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("van-cell",{attrs:{title:"我的收货地址",center:!0,"value-class":"content",to:"/uc/setting/address"}},[e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})],1),e("van-cell",{attrs:{title:"登录密码",center:!0,"value-class":"content",to:"/resetpwd"}},[[t._v("\n            修改\n            "),e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("van-cell",{attrs:{title:"支付密码",center:!0,"value-class":"content",to:"/resetpwd"}},[[t._v("\n            修改\n            "),e("van-icon",{attrs:{name:"arrow",size:"10px",color:"#b4b4b4"}})]],2),e("div",{staticClass:"login-out",on:{click:t.logout}},[t._v("退出当前账户")]),e("van-popup",{staticClass:"popup-custom popup-profile",attrs:{"close-on-click-overlay":!1},model:{value:t.profileShow,callback:function(a){t.profileShow=a},expression:"profileShow"}},[e("div",{staticClass:"popup-content"},[e("img",{staticClass:"popup-profile",attrs:{src:t.profileUrl,alt:""}}),e("van-uploader",{attrs:{"after-read":t.onRead,accept:"image/gif, image/jpeg","max-size":t.maxSize},on:{oversize:t.oversize}},[e("div",{staticClass:"upload-text"},[t._v("更换头像")])])],1),e("div",{staticClass:"button-line"},[e("button",{staticClass:"cancel",on:{click:t.closePopup}},[t._v("取消")]),e("button",{staticClass:"confirm",on:{click:function(a){return t.confirmPopup("profile")}}},[t._v("确定")])])]),e("van-popup",{staticClass:"popup-custom popup-name",attrs:{"close-on-click-overlay":!1},model:{value:t.nameShow,callback:function(a){t.nameShow=a},expression:"nameShow"}},[e("div",{staticClass:"popup-content"},[e("van-field",{attrs:{placeholder:"请输入昵称"},model:{value:t.name,callback:function(a){t.name=a},expression:"name"}})],1),e("div",{staticClass:"button-line"},[e("button",{staticClass:"cancel",on:{click:t.closePopup}},[t._v("取消")]),e("button",{staticClass:"confirm",on:{click:function(a){return t.confirmPopup("name")}}},[t._v("确定")])])]),e("van-popup",{staticClass:"popup-qr-code",attrs:{"close-on-click-overlay":!1},model:{value:t.qrCodeShow,callback:function(a){t.qrCodeShow=a},expression:"qrCodeShow"}},[e("div",{staticClass:"info-box"},[e("img",{staticClass:"profile",attrs:{src:t.user.photo||o("c8c1"),alt:"头像"}}),e("div",{staticClass:"info"},[e("span",{staticClass:"name"},[t._v(t._s(t.user.name))]),e("span",{staticClass:"address"},[t._v(t._s(t._f("address")(t.user)))])]),e("div",{staticClass:"img-box"},[e("img",{staticClass:"qr-code",attrs:{src:"",alt:""}})])]),e("div",{staticClass:"close",on:{click:function(a){t.qrCodeShow=!1}}},[t._v("×")])]),e("van-popup",{attrs:{position:"bottom","close-on-click-overlay":!1},model:{value:t.locationShow,callback:function(a){t.locationShow=a},expression:"locationShow"}},[e("van-area",{attrs:{"area-list":t.areaList,value:t.locationValue},on:{confirm:t.confirmLocation,cancel:t.closePopup}})],1)],1)},s=[],i=(o("ac6a"),o("456d"),o("7514"),o("7f7f"),o("0edf")),n=o("c8c1"),c=o.n(n),l={name:"setting",filters:{address:function(t){return t.area?t.province+t.city+t.area:"---"}},data:function(){return{areaList:i["a"],name:"",maxSize:512e3,profileUrl:"",locationValue:"",profileShow:!1,nameShow:!1,locationShow:!1,qrCodeShow:!1,user:{}}},methods:{closePopup:function(){this.profileUrl="",this.name="",this.province="",this.city="",this.area="",this.locationValue="",this.profileShow=!1,this.nameShow=!1,this.locationShow=!1},confirmPopup:function(t){var a=this,o=null;switch(t){case"profile":o={photo:this.profileUrl};break;case"name":o={name:this.name};break;case"location":o={province:this.province,city:this.city,area:this.area};break}this.$axios.post("/user/usersave",o).then(function(t){var o=t.data;1===o.code?(o&&Object.assign(a,o.data),a.closePopup(),a.getUserInfo(),a.$toast("修改成功")):a.$toast(o.msg)})},confirmLocation:function(t){t&&(this.province=t[0].name,this.city=t[1].name,this.area=t[2].name),this.confirmPopup("location"),console.log({data:t})},getUserInfo:function(){var t=this;this.$axios.post("/mine/index").then(function(a){var o=a.data;1===o.code?o&&Object.assign(t,o.data):t.$toast(o.msg)})},logout:function(){var t=this;this.$axios.post("/login/outlogin").then(function(a){var o=a.data;1===o.code?(t.$toast("退出成功"),t.$store.commit("core/exit"),t.$router.push("/login")):t.$toast(o.msg)})},modifyLocation:function(){var t=this.user;if(t.area){var a=i["a"].county_list;this.locationValue=Object.keys(a).find(function(o){return a[o]===t.area})}this.locationShow=!0},modifyNickname:function(){this.name=this.user.name,this.nameShow=!0},modifyProfile:function(){this.profileUrl=this.user.photo||c.a,this.profileShow=!0},onRead:function(t){var a=this,o=new FormData;o.append("file",t.file),this.$axios.post("/index/upload",o,{headers:{"Content-Type":"multipart/form-data"}}).then(function(t){var o=t.data;1===o.code?o.data&&(a.profileUrl=o.data):a.$toast(o.msg)})},oversize:function(){var t=Math.floor(this.maxSize/1024);this.$toast("上传图片最大不能超过".concat(t,"KB"))}},created:function(){this.getUserInfo()}},r=l,p=(o("e904"),o("2877")),u=Object(p["a"])(r,e,s,!1,null,"64e2c072",null);a["default"]=u.exports},"4df5":function(t,a){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYBAMAAAASWSDLAAAAG1BMVEWZmZlHcEyampqYmJiXl5eQkJCZmZmYmJiZmZnmt8deAAAACHRSTlOBAL9AJwpfwA0sv3YAAACWSURBVBjTXdAxDsIwDAXQb1gyxmoRzBlQ1qonqJSBla0jGzNbRzORY2MnpbT18vUky3aCbEW+BD4AHHnRiBBmvpB/azjIqR8MbX9XNPllOOdujzaQwYfB7QassVlaqmtq8qq2qG0z6gA+hCuekJTSjTgGCXXPSBy4QM/5Qw9VxCxY8MBxftxo0wjLgIr6IdoGTL+lk8UXG0U240Yb79wAAAAASUVORK5CYII="},"9c93":function(t,a,o){},e904:function(t,a,o){"use strict";var e=o("9c93"),s=o.n(e);s.a}}]);
//# sourceMappingURL=chunk-3bc06959.6dfc9fa6.js.map